<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Swiss News üá®üá≠ - Modern RSS Reader</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet" />
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');

      :root {
        --swiss-red: #ff0000;
        --swiss-white: #ffffff;
      }

      body {
        font-family: 'Inter', sans-serif;
        background-color: #f7f7f7;
        color: #333;
      }

      .swiss-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        padding: 2rem;
      }

      .news-card {
        background: white;
        border-radius: 4px;
        overflow: hidden;
        transition: transform 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .news-card:hover {
        transform: translateY(-5px);
      }

      .swiss-header {
        background: var(--swiss-red);
        color: var(--swiss-white);
        padding: 2rem;
        text-align: center;
      }

      .loading-animation {
        width: 50px;
        height: 50px;
        border: 5px solid #f3f3f3;
        border-top: 5px solid var(--swiss-red);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .emoji-badge {
        display: inline-block;
        padding: 0.25rem 0.5rem;
        background: #f0f0f0;
        border-radius: 20px;
        margin: 0.25rem;
        font-size: 0.9rem;
      }

      .news-meta {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #666;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <header class="swiss-header">
      <h1 class="text-4xl font-bold mb-4">Swiss News üá®üá≠</h1>
      <p class="text-xl">Aktuelle Nachrichten aus der Schweiz</p>
    </header>

    <div class="container mx-auto px-4 py-8">
      <div id="loading" class="flex justify-center items-center py-12">
        <div class="loading-animation"></div>
      </div>
      <div id="news-container" class="swiss-grid hidden"></div>
    </div>

    <script>
      async function fetchRSSFeed() {
        const CORS_PROXY = 'https://api.allorigins.win/raw?url=';
        const RSS_URL = 'https://www.srf.ch/news/bnf/rss/19032223';

        try {
          const response = await fetch(CORS_PROXY + encodeURIComponent(RSS_URL));
          const text = await response.text();
          const parser = new DOMParser();
          const xml = parser.parseFromString(text, 'text/xml');
          return Array.from(xml.querySelectorAll('item')).map((item) => ({
            title: item.querySelector('title')?.textContent || '',
            link: item.querySelector('link')?.textContent || '',
            description: item.querySelector('description')?.textContent || '',
            pubDate: item.querySelector('pubDate')?.textContent || '',
            category: item.querySelector('category')?.textContent || 'Allgemein',
          }));
        } catch (error) {
          console.error('Error fetching RSS:', error);
          return [];
        }
      }

      function getEmoji(category) {
        const emojiMap = {
          Politik: 'üèõÔ∏è',
          Wirtschaft: 'üíº',
          Sport: '‚öΩ',
          Kultur: 'üé≠',
          International: 'üåç',
          Regional: 'üèòÔ∏è',
          Allgemein: 'üì∞',
        };
        return emojiMap[category] || 'üì∞';
      }

      function formatDate(dateStr) {
        const date = new Date(dateStr);
        return date.toLocaleDateString('de-CH', {
          day: '2-digit',
          month: '2-digit',
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit',
        });
      }

      function createNewsCard(item) {
        return `
                <article class="news-card p-6">
                    <div class="news-meta mb-4">
                        <span class="emoji-badge">${getEmoji(item.category)} ${item.category}</span>
                        <time datetime="${item.pubDate}">${formatDate(item.pubDate)}</time>
                    </div>
                    <h2 class="text-xl font-bold mb-4">
                        <a href="${item.link}" target="_blank" class="hover:text-red-600 transition-colors">
                            ${item.title}
                        </a>
                    </h2>
                    <p class="text-gray-600 mb-4">${item.description}</p>
                    <a href="${item.link}" target="_blank" 
                       class="inline-block bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors">
                        Weiterlesen ‚Üí
                    </a>
                </article>
            `;
      }

      async function initializeNewsApp() {
        const loadingElement = document.getElementById('loading');
        const newsContainer = document.getElementById('news-container');

        try {
          const news = await fetchRSSFeed();
          loadingElement.classList.add('hidden');
          newsContainer.classList.remove('hidden');

          newsContainer.innerHTML = news.map(createNewsCard).join('');
        } catch (error) {
          loadingElement.innerHTML = `
                    <div class="text-center text-red-600">
                        <p class="text-xl">‚ö†Ô∏è Fehler beim Laden der Nachrichten</p>
                        <button onclick="initializeNewsApp()" 
                                class="mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors">
                            Erneut versuchen
                        </button>
                    </div>
                `;
        }
      }

      // Initialize the app when the page loads
      document.addEventListener('DOMContentLoaded', initializeNewsApp);

      // Refresh news every 5 minutes
      setInterval(initializeNewsApp, 300000);
    </script>
  </body>
</html>
